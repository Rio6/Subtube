<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <script src="https://cdn.jsdelivr.net/npm/subtitle@2.0.3/dist/subtitle.bundle.min.js"></script>
        <script src="subtube.js"></script>

        <script>
            function loadFile(files) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById("srt-area").value += this.result;
                    loadSubtitle();
                };
                for(let file of files) {
                    reader.readAsText(file);
                }
            }

            function loadSubtitle() {
                Subtube.addSubtitle('iframe-player', "Lang", document.getElementById('srt-area').value);
            }
        </script>

        <style>
            .subtube-text, .subtube-language {
                color: white;
                background-color: rgba(0, 0, 0, 0.8);
                font-family: Arial;
                border: none;
            }
        </style>
    </head>

    <body>
        <iframe id="iframe-player" style="position:absolute; top:0; left:0" width="640" height="360" subtube enablejsapi="1" fs="0"></iframe>
        <script>
            let params = new URLSearchParams(window.location.search);
            document.getElementById('iframe-player').src=`https://www.youtube.com/embed/${params.get('v')}?enablejsapi=1`;
        </script>
        <textarea id='srt-area'></textarea>
        <input type="file" multiple onchange="loadFile(this.files)" />
        <button onclick="loadSubtitle()">Load</button>
        <button onclick="Subtube.toggleSubtitle('iframe-player')">Toggle</button>
        <input type="range" min="1" max="200" value="100" autocomplete="off" onchange="Subtube.setSubtitleSize('iframe-player', this.value)" />
    </body>
</html>
